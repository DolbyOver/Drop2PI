<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Drop2pi by qiajigou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Drop2pi</h1>
      <h2 class="project-tagline">This is a simple Dropbox Client tool to sync files to Raspberry PI.</h2>
      <a href="https://github.com/qiajigou/Drop2PI" class="btn">View on GitHub</a>
      <a href="https://github.com/qiajigou/Drop2PI/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/qiajigou/Drop2PI/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="drop2pi" class="anchor" href="#drop2pi" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Drop2PI</h2>

<p><a href="https://travis-ci.org/GuoJing/Drop2PI"><img src="https://travis-ci.org/GuoJing/Drop2PI.png?branch=master" alt="Build Status"></a> <a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/GuoJing/drop2pi/trend.png" alt="Bitdeli Badge"></a></p>

<p>Sorry for bad English.</p>

<p>This is a very simple tool to sync files between Dropbox and Raspberry PI. In fact this command tools can used any system running on Python.</p>

<p>But I only wants to sync <em>small</em> files to Raspberry PI. So I called this Dropbox to PI.</p>

<p>Big files are not well supported.</p>

<p><a href="http://guojing.me/donate/en/">Donate Me</a> and support my work.</p>

<p>Try <code>python demo.py</code>.</p>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>

<p>Download the code and:</p>

<pre><code>python setup.py install
</code></pre>

<p>Or using pip:</p>

<pre><code>pip install d2pi
</code></pre>

<h2>
<a id="config" class="anchor" href="#config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Config</h2>

<p>You have to go to <a href="https://www.dropbox.com/developers/apps">Dropbox Develop Page</a> to create a App.</p>

<p>After created a App, you can find <code>APP_KEY</code> and <code>APP_SECRET</code>.</p>

<p>You could run demo.py three times to generate automatically:</p>

<ol>
<li>First time it will ask you to fill app_key and app_secret and path_to_watch.</li>
<li>After success and run again, it will ask to auth to dropbox.</li>
<li>After success and run again, it will start demo and download files.</li>
</ol>

<h2>
<a id="config-yourself" class="anchor" href="#config-yourself" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Config yourself</h2>

<p>You can do it your self:</p>

<pre><code>from d2pi.auth import auth
auth()
</code></pre>

<p>It will ask you to fill the app_key and secret and watch path your self.</p>

<p>After fill up, restart terminal bash and:</p>

<pre><code>from d2pi.auth import auth
auth()
</code></pre>

<p>Run again.</p>

<p>This will generate config automatically, remember root user's config is not the same path with normal user.</p>

<p>Or you can edit your config file at <code>~/.d2pi/config.yml</code>, <code>path_to_watch</code> is the dir you want to watch.</p>

<h2>
<a id="overall" class="anchor" href="#overall" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overall</h2>

<p>In version 0.0.9.2, you can use downloader, uploader and default watcher.</p>

<p>downloader:</p>

<pre><code>from d2pi.watch import downloader
downloader.run()
</code></pre>

<p>downloader will only download files to local automatically.</p>

<p>uploader:</p>

<pre><code>from d2pi.watch import uploader
uploader.run()
</code></pre>

<p>uploader will only upload files.</p>

<p>watcher with auto download:</p>

<pre><code>from d2pi.watch import watcher
watcher.run()
</code></pre>

<p>auto download watcher will modify every events and sync to server.</p>

<p>This watcher will watch all events in local like:</p>

<ul>
<li>NEW FILE/DIR</li>
<li>DELETE FILE/DIR</li>
<li>MOVE FILE/DIR</li>
</ul>

<h2>
<a id="important" class="anchor" href="#important" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Important</h2>

<p>The watcher will do anything and watch any events, so:</p>

<p>It will cache downloaded files and will be flushed when file statue changed.</p>

<p>It have a simple lock, if upload is working, download will be blocked.</p>

<p>The same, if auto download is working, then new file could create but upload event will be block.</p>

<p>Because this is a simple tool, will not connect to any server and not be pushed by any server.</p>

<p>We don't have better way to solve that problem.</p>

<p>Why don't we add a queue and insert event to a queue?</p>

<p>This tool is using watchdog, every file download will cause a create file event. Then we will upload file again, with same content.</p>

<p>So we need block something.</p>

<h2>
<a id="customize-watcher" class="anchor" href="#customize-watcher" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customize watcher</h2>

<p>You can customize watcher yourself:</p>

<pre><code>def __init__(self, can_upload=True, can_download=True,
             can_delete=True, auto_download=False):
    self.can_upload = can_upload
    self.can_download = can_download
    self.can_delete = can_delete
    self.auto_download = auto_download
</code></pre>

<p>So downloader is:</p>

<pre><code>downloader = Watcher(can_upload=False, can_delete=False, auto_download=True)
</code></pre>

<p>Any bug, please contact me at <a href="mailto:soundbbg@gmail.com">soundbbg@gmail.com</a>.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/qiajigou/Drop2PI">Drop2pi</a> is maintained by <a href="https://github.com/qiajigou">qiajigou</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
