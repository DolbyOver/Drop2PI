<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Drop2pi by GuoJing</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Drop2pi</h1>
        <p>This is a simple Dropbox Client tool to sync files to Raspberry PI.</p>

        <p class="view"><a href="https://github.com/GuoJing/Drop2PI">View the Project on GitHub <small>GuoJing/Drop2PI</small></a></p>


        <ul>
          <li><a href="https://github.com/GuoJing/Drop2PI/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/GuoJing/Drop2PI/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/GuoJing/Drop2PI">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>
<a name="important" class="anchor" href="#important"><span class="octicon octicon-link"></span></a>IMPORTANT</h2>

<p>watchdog is needed in this lib, but a <a href="https://github.com/GuoJing/Drop2PI/issues/5">bug</a> was found in latest watchdog (2014.1.29 version 0.7.0), in Mac OS, if you replace a file in <code>Finder</code>, it will cause two events, first one is delete, then another one is create, so in drop to pi, this will delete file in server if you replace file in <code>Finder</code>. Command in command line like <code>mv</code> and <code>cp</code> will NOT have this problem.</p>

<p>So I download the watchdog to the code and add filter in fsevents.py. If you don't need it, just remove the watchdog folder.</p>

<p>But still need to install watchdog, because file <code>_watchdog_fsevents.so</code> is needed.</p>

<h2>
<a name="drop2pi" class="anchor" href="#drop2pi"><span class="octicon octicon-link"></span></a>Drop2PI</h2>

<p>Sorry for bad English.</p>

<p>This is a very simple tool to sync files between Dropbox and Raspberry PI. In fact this command tools can used any system running on Python.</p>

<p>But I only wants to sync files to Raspberry PI. So I called this Dropbox to PI.</p>

<h2>
<a name="overall" class="anchor" href="#overall"><span class="octicon octicon-link"></span></a>Overall</h2>

<ol>
<li>download the file and folder auto.</li>
<li>modify the folder, auto sync to Dropbox.</li>
<li>delete the file or folder which deleted in Dropbox server auto.</li>
</ol><h2>
<a name="install" class="anchor" href="#install"><span class="octicon octicon-link"></span></a>Install</h2>

<p>You can install by download the source or</p>

<pre><code>python setup.py install
</code></pre>

<p>or</p>

<pre><code>pip install d2pi
</code></pre>

<h2>
<a name="v-004" class="anchor" href="#v-004"><span class="octicon octicon-link"></span></a>V 0.0.4</h2>

<ol>
<li>set config at ~/.d2pi/config.yml</li>
<li>new dropbox auth method (flow)</li>
</ol><h2>
<a name="need-to-do" class="anchor" href="#need-to-do"><span class="octicon octicon-link"></span></a>Need to do</h2>

<ol>
<li>config the max donload file size.</li>
<li>if there is syncing event, quit update event. (see known bug)</li>
</ol><h2>
<a name="packages" class="anchor" href="#packages"><span class="octicon octicon-link"></span></a>Packages</h2>

<p>You have to install <a href="https://github.com/gorakhargosh/watchdog">Watchdog</a> first.</p>

<pre><code>sudo pip install watchdog
</code></pre>

<p>And also download Dropbox python SDK <a href="https://www.dropbox.com/developers/core/sdk">HERE</a>.</p>

<pre><code>pip install dropbox
</code></pre>

<p>And yaml.</p>

<h2>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h2>

<h4>
<a name="init" class="anchor" href="#init"><span class="octicon octicon-link"></span></a>init</h4>

<pre><code>python auth.py 
</code></pre>

<p>or</p>

<pre><code>from d2pi import auth
auth.auth()
</code></pre>

<p>You have to go to <a href="https://www.dropbox.com/developers/apps">Dropbox Develop Page</a> to create a App.</p>

<p>After created a App, you can find the APP_KEY and APP_SECRET, ACCESS_TYPE is also needed.</p>

<p>you can edit your config file at <code>~/.d2pi/config.yml</code>, path_to_watch is the dir you want to watch.</p>

<h4>
<a name="run-watchingpy" class="anchor" href="#run-watchingpy"><span class="octicon octicon-link"></span></a>run watching.py</h4>

<pre><code>python watching.py
</code></pre>

<p>or</p>

<pre><code>from d2pi import watching
watching.go_watch()
</code></pre>

<p>This will watch dir <code>PATH_TO_WATCH</code>, and any changes like <code>create</code>, <code>modify</code>, <code>delete</code> and <code>move</code> will change the file in Dropbox.</p>

<h3>
<a name="my-pi" class="anchor" href="#my-pi"><span class="octicon octicon-link"></span></a>My PI</h3>

<p>I need to download some files in my PI, don't need to update or edit on PI. so I just need a cron running on watching.py -c.</p>

<p>soundbbg at gmail</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/GuoJing">GuoJing</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("42721249");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>